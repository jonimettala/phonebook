(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{24:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),o=t(18),u=t.n(o),i=(t(24),t(8)),l=t(6),d=t(4),s=t(7),j=t.n(s),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},f=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n,t){return j.a.put(b+"/".concat(e),{name:n,number:t}).then((function(e){return e.data}))},m=function(e){return j.a.delete(b+"/".concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.filter,t=e.handleFilterChange;return Object(c.jsxs)(c.Fragment,{children:["filter shown with ",Object(c.jsx)("input",{value:n,onChange:t}),Object(c.jsx)("br",{})]})},p=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add new"}),"name: ",Object(c.jsx)("input",{value:t,onChange:r}),Object(c.jsx)("br",{}),"number: ",Object(c.jsx)("input",{value:a,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.person,t=e.handleDelete;return Object(c.jsxs)(c.Fragment,{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return t(n.name,n.id)},children:"delete"}),Object(c.jsx)("br",{})]})},g=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return Object(c.jsx)(x,{person:e,handleDelete:t},e.name)}))},y=(t(43),{color:"red"}),w=function(e){var n=e.notice;return Object(c.jsx)("div",{className:"notice",style:"error"===n.type?y:null,children:Object(c.jsx)("p",{children:n.text})})},N=function(){var e=Object(r.useState)([]),n=Object(d.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),u=Object(d.a)(o,2),s=u[0],j=u[1],b=Object(r.useState)(""),x=Object(d.a)(b,2),y=x[0],N=x[1],C=Object(r.useState)(""),k=Object(d.a)(C,2),S=k[0],D=k[1],F=Object(r.useState)(null),P=Object(d.a)(F,2),A=P[0],E=P[1];Object(r.useEffect)((function(){h().then((function(e){a(e)}))}),[]);var J=function(e,n){var c,r=Object(l.a)(t);try{var o=function(){var r=c.value;if(r.name===e)return window.confirm("".concat(s," is already added to phonebook, would you like to replace their number with the new one?"))&&O(r.id,r.name,n).then((function(e){var n,c=t,o=0,u=Object(l.a)(c);try{for(u.s();!(n=u.n()).done;){n.value.id===r.id&&c.splice(o,1,e),o++}}catch(d){u.e(d)}finally{u.f()}a(Object(i.a)(c)),B("Updated ".concat(s,"'s number"))})),{v:!0}};for(r.s();!(c=r.n()).done;){var u=o();if("object"===typeof u)return u.v}}catch(d){r.e(d)}finally{r.f()}return!1},B=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E({text:e,type:n}),setTimeout((function(){E(null)}),5e3)},I=t.filter((function(e){return e.name.includes(S)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),null!==A?Object(c.jsx)(w,{notice:A}):Object(c.jsx)(c.Fragment,{}),Object(c.jsx)(v,{filter:S,handleFilterChange:function(e){D(e.target.value)}}),Object(c.jsx)(p,{addPerson:function(e){e.preventDefault(),s.length>0&&!J(s,y)&&f({name:s,number:y}).then((function(e){a(t.concat(e)),B("Added ".concat(s))}))},newName:s,handleNameChange:function(e){j(e.target.value)},newNumber:y,handleNumberChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(g,{persons:I,handleDelete:function(e,n){window.confirm("Want to delete ".concat(e,"?"))&&m(n).then((function(){var c,r=t,o=0,u=Object(l.a)(r);try{for(u.s();!(c=u.n()).done;){c.value.id===n&&r.splice(o,1),o++}}catch(d){u.e(d)}finally{u.f()}a(Object(i.a)(r)),B("Removed ".concat(e))})).catch((function(c){B("".concat(e," was already removed. Now they have been removed from your list too."),"error");var r,o=t,u=0,d=Object(l.a)(o);try{for(d.s();!(r=d.n()).done;){r.value.id===n&&o.splice(u,1),u++}}catch(s){d.e(s)}finally{d.f()}a(Object(i.a)(o))}))}})]})};u.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(N,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.91156542.chunk.js.map